<template>
  <div class="page container">
    <section class="section-left">
      <div class="svg-background">
        <img class="studio-bulb" src="../../assets/images/icons/studio_bulb.png" alt="">
        <svg
          xmlns:dc="http://purl.org/dc/elements/1.1/"
          xmlns:cc="http://creativecommons.org/ns#"
          xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
          xmlns:svg="http://www.w3.org/2000/svg"
          xmlns="http://www.w3.org/2000/svg"
          xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd"
          xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"
          :width="$store.state.screenUnit.screenWidth + 'px'"
          :height="$store.state.isPhone ? ($store.state.screenUnit.screenWidth * 1.6 + 'px') : (0.478 * $store.state.screenUnit.screenWidth + 'px')"
          viewBox="0 0 210 297"
          version="1.1"
          id="studio-svg"
          inkscape:version="0.92.3 (2405546, 2018-03-11)"
          sodipodi:docname="绘图-1.svg">
          <defs
            id="defs433" />
          <sodipodi:namedview
            id="base"
            pagecolor="#ffffff"
            bordercolor="#666666"
            borderopacity="1.0"
            inkscape:pageopacity="0.0"
            inkscape:pageshadow="2"
            inkscape:zoom="0.35"
            inkscape:cx="-98.571429"
            inkscape:cy="560"
            inkscape:document-units="mm"
            inkscape:current-layer="layer1"
            showgrid="false"
            inkscape:window-width="1920"
            inkscape:window-height="1001"
            inkscape:window-x="-9"
            inkscape:window-y="-9"
            inkscape:window-maximized="1" />
          <metadata
            id="metadata436">
            <rdf:RDF>
              <cc:Work
                rdf:about="">
                <dc:format>image/svg+xml</dc:format>
                <dc:type
                  rdf:resource="http://purl.org/dc/dcmitype/StillImage" />
                <dc:title></dc:title>
              </cc:Work>
            </rdf:RDF>
          </metadata>
          <g
            v-if="!$store.state.isPhone"
            inkscape:label="Layer 1"
            inkscape:groupmode="layer"
            id="layer1">
            <!-- 下面是底线 -->
            <path
              inkscape:connector-curvature="0"
              id="path174"
              style="fill:none;stroke:#c8c2cc;stroke-width:5.44444399;stroke-linecap:butt;stroke-linejoin:round;stroke-miterlimit:10;stroke-dasharray:none;stroke-opacity:0.5"
              d="m 119.57231,208.2979 -0.17639,24.12916 -169.1569438,-0.63288 v 43.31899" />
            <path
              inkscape:connector-curvature="0"
              id="path178"
              style="fill:none;stroke:#c8c2cc;stroke-width:2.82222199;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10;stroke-dasharray:none;stroke-opacity:0.5"
              d="m 134.08162,160.59548 c -10.05099,3.81811 -20.10234,3.81811 -30.15368,0 -2.60456,-0.9899 -5.28426,1.24671 -4.73781,3.97862 l 4.62421,23.12035 c 1.44816,7.24147 7.80592,12.45341 15.19062,12.45341 7.38434,0 13.74245,-5.21194 15.19061,-12.45341 l 4.62421,-23.12035 c 0.5461,-2.73191 -2.13325,-4.96852 -4.73816,-3.97862 z" />
            <path
              inkscape:connector-curvature="0"
              id="path182"
              style="fill:none;stroke:#c8c2cc;stroke-width:2.30716658;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10;stroke-dasharray:none;stroke-opacity:0.5"
              d="m 125.97173,198.67618 c -4.25345,1.51588 -8.50689,1.51588 -12.76068,0 l 2.55234,8.52734 h 7.65634 z" />
            <path
              inkscape:connector-curvature="0"
              id="path186"
              style="fill:none;stroke:#c8c2cc;stroke-width:2.30716658;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10;stroke-dasharray:none;stroke-opacity:0.5"
              d="m 115.31537,190.79929 h 8.46666" />
            <path
              inkscape:connector-curvature="0"
              id="path190"
              style="fill:none;stroke:#c8c2cc;stroke-width:2.30716658;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10;stroke-dasharray:none;stroke-opacity:0.5"
              d="m 115.31537,187.62429 h 8.46666" />
            <path
              inkscape:connector-curvature="0"
              id="path194"
              style="fill:none;stroke:#c8c2cc;stroke-width:2.30716658;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10;stroke-dasharray:none;stroke-opacity:0.5"
              d="m 115.31537,184.44928 h 8.46666" />
            <path
              inkscape:connector-curvature="0"
              id="path196"
              style="fill:none;stroke:#c8c2cc;stroke-width:2.9181776;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10;stroke-dasharray:none;stroke-opacity:0.5"
              d="m 123.78203,172.80765 h -8.46666 v 5.64444 h 8.46666 z" />
            <!-- 下面是流动 -->
            <path
              inkscape:connector-curvature="0"
              id="path174"
              style="fill:none;stroke:#662d91;stroke-width:5.64444399;stroke-linecap:butt;stroke-linejoin:round;stroke-miterlimit:10;stroke-dasharray:none;stroke-opacity:1"
              d="m 119.57231,206.4979 -0.17639,25.92916 -169.1569438,-0.63288 v 43.31899" />
            <path
              inkscape:connector-curvature="0"
              id="path178"
              style="fill:none;stroke:#662d91;stroke-width:2.82222199;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10;stroke-dasharray:none;stroke-opacity:1"
              d="m 133.80186,160.59548 c -10.05099,3.81811 -20.10234,3.81811 -30.15368,0 -2.60456,-0.9899 -5.28426,1.24671 -4.73781,3.97862 l 4.62421,23.12035 c 1.44816,7.24147 7.80592,12.45341 15.19062,12.45341 7.38434,0 13.74245,-5.21194 15.19061,-12.45341 l 4.62421,-23.12035 c 0.5461,-2.73191 -2.13325,-4.96852 -4.73816,-3.97862 z" />
            <path
              inkscape:connector-curvature="0"
              id="path182"
              style="fill:none;stroke:#662d91;stroke-width:2.30716658;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10;stroke-dasharray:none;stroke-opacity:1"
              d="m 125.97173,198.67618 c -4.25345,1.51588 -8.50689,1.51588 -12.76068,0 l 2.55234,8.52734 h 7.65634 z" />
            <path
              inkscape:connector-curvature="0"
              id="path186"
              style="fill:none;stroke:#662d91;stroke-width:2.30716658;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10;stroke-dasharray:none;stroke-opacity:1"
              d="m 115.31537,190.79929 h 8.46666" />
            <path
              inkscape:connector-curvature="0"
              id="path190"
              style="fill:none;stroke:#662d91;stroke-width:2.30716658;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10;stroke-dasharray:none;stroke-opacity:1"
              d="m 115.31537,177.62429 h 8.46666" />
            <path
              inkscape:connector-curvature="0"
              id="path194"
              style="fill:none;stroke:#662d91;stroke-width:2.30716658;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10;stroke-dasharray:none;stroke-opacity:1"
              d="m 115.31537,184.44928 h 8.46666" />
            <path
              inkscape:connector-curvature="0"
              id="path196"
              style="fill:none;stroke:#662d91;stroke-width:2.9181776;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10;stroke-dasharray:none;stroke-opacity:1"
              d="m 123.78203,172.80765 h -8.46666 v 5.64444 h 8.46666 z" />
          </g>
          <!-- 下面是手机端的 -->
          <g
            v-if="$store.state.isPhone"
            inkscape:label="Layer 1"
            inkscape:groupmode="layer"
            id="layer1">
            <path
              inkscape:connector-curvature="0"
              id="path174"
              style="fill:none;stroke:#c8c2cc;stroke-width:2.82222199;stroke-linecap:butt;stroke-linejoin:round;stroke-miterlimit:10;stroke-dasharray:none;stroke-opacity:0.5"
              d="m 105.43671,183.54472 -0.0882,148.25091" />
            <path
              inkscape:connector-curvature="0"
              id="path178"
              style="fill:none;stroke:#c8c2cc;stroke-width:1.411111;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10;stroke-dasharray:none;stroke-opacity:0.5"
              d="m 113.15165,159.593136 c -5.02568,1.909234 -10.05135,1.909234 -15.07702,0 -1.30246,-0.494594 -2.642314,0.623711 -2.368904,1.989667 l 2.312104,11.560174 c 0.7239,3.620558 3.90314,6.226881 7.59531,6.226881 3.69217,0 6.87105,-2.606323 7.5953,-6.226881 l 2.31211,-11.560174 c 0.27305,-1.365956 -1.0668,-2.484261 -2.3689,-1.989667 z" />
            <path
              inkscape:connector-curvature="0"
              id="path464"
              style="opacity:0.5;fill:#bdccd4;fill-opacity:1;"
              d="m 101.83953,179.086175 1.18321,3.95358 c 0.0893,0.298803 0.36442,0.503414 0.67628,0.503414 h 3.82799 c 0.31186,0 0.58632,-0.204611 0.67592,-0.503414 l 1.15782,-3.868914 c -0.44238,0.229306 -1.00965,0.424392 -1.65206,0.598664 l -0.70696,2.362553 h -2.77742 l -0.71932,-2.403122 c -0.59196,-0.156281 -1.14265,-0.377473 -1.66546,-0.642761" />
            <!-- <path
              inkscape:connector-curvature="0"
              id="path182"
              style="fill:none;stroke:#c8c2cc;stroke-width:1.15358329;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10;stroke-dasharray:none;stroke-opacity:0.5"
              d="m 108.73642,178.633468 c -2.12654,0.758119 -4.25344,0.758119 -6.38034,0 l 1.276,4.264022 h 3.82835 z" /> -->
            <path
              inkscape:connector-curvature="0"
              id="path186"
              style="fill:none;stroke:#c8c2cc;stroke-width:1.15358329;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10;stroke-dasharray:none;stroke-opacity:0.5"
              d="m 103.40824,174.69541 h 4.23334" />
            <path
              inkscape:connector-curvature="0"
              id="path190"
              style="fill:none;stroke:#c8c2cc;stroke-width:1.15358329;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10;stroke-dasharray:none;stroke-opacity:0.5"
              d="m 103.40824,173.10791 h 4.23334" />
            <path
              inkscape:connector-curvature="0"
              id="path194"
              style="fill:none;stroke:#c8c2cc;stroke-width:1.15358329;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10;stroke-dasharray:none;stroke-opacity:0.5"
              d="m 103.40824,171.52041 h 4.23334" />
            <path
              inkscape:connector-curvature="0"
              id="path196"
              style="fill:none;stroke:#c8c2cc;stroke-width:1.4590888;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10;stroke-dasharray:none;stroke-opacity:0.5"
              d="m 107.64158,165.699394 h -4.23334 v 2.822222 h 4.23334 z" />
            <!-- 下面是流动 -->
            <path
              inkscape:connector-curvature="0"
              id="path174"
              style="fill:none;stroke:#662d91;stroke-width:2.82222199;stroke-linecap:butt;stroke-linejoin:round;stroke-miterlimit:10;stroke-dasharray:none;stroke-opacity:1"
              d="m 105.43671,182.54472 -0.0882,148.25091" />
            <path
              inkscape:connector-curvature="0"
              id="path178"
              style="fill:none;stroke:#662d91;stroke-width:1.411111;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10;stroke-dasharray:none;stroke-opacity:1"
              d="m 113.15165,159.593136 c -5.02568,1.909234 -10.05135,1.909234 -15.07702,0 -1.30246,-0.494594 -2.642314,0.623711 -2.368904,1.989667 l 2.312104,11.560174 c 0.7239,3.620558 3.90314,6.226881 7.59531,6.226881 3.69217,0 6.87105,-2.606323 7.5953,-6.226881 l 2.31211,-11.560174 c 0.27305,-1.365956 -1.0668,-2.484261 -2.3689,-1.989667 z" />
            <path
              inkscape:connector-curvature="0"
              id="path182"
              style="fill:none;stroke:#662d91;stroke-width:1.15358329;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10;stroke-dasharray:none;stroke-opacity:1"
              d="m 108.73642,178.633468 c -2.12654,0.758119 -4.25344,0.758119 -6.38034,0 l 1.276,4.264022 h 3.82835 z" />
            <path
              inkscape:connector-curvature="0"
              id="path186"
              style="fill:none;stroke:#662d91;stroke-width:1.15358329;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10;stroke-dasharray:none;stroke-opacity:1"
              d="m 103.40824,174.69541 h 4.23334" />
            <path
              inkscape:connector-curvature="0"
              id="path190"
              style="fill:none;stroke:#662d91;stroke-width:1.15358329;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10;stroke-dasharray:none;stroke-opacity:1"
              d="m 103.40824,173.10791 h 4.23334" />
            <path
              inkscape:connector-curvature="0"
              id="path194"
              style="fill:none;stroke:#662d91;stroke-width:1.15358329;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10;stroke-dasharray:none;stroke-opacity:1"
              d="m 103.40824,171.52041 h 4.23334" />
            <path
              inkscape:connector-curvature="0"
              id="path196"
              style="fill:none;stroke:#662d91;stroke-width:1.4590888;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10;stroke-dasharray:none;stroke-opacity:1"
              d="m 107.64158,165.699394 h -4.23334 v 2.822222 h 4.23334 z" />
          </g>
        </svg>
      </div>
    </section>
    <section class="section-right">
      <div class="rectangle"></div>
      <div class="words-container">
        <span class="studio-name" v-if="!$store.state.isPhone">QG Studio</span>
        <span class="studio-name" v-if="$store.state.isPhone">
          QG<br>
          Studio
        </span>
        <span class="web-type">招新网站</span>
        <span class="studio-honor">小平科技创新<br v-if="$store.state.isPhone">团队</span>
        <span class="studio-motto" v-if="!$store.state.isPhone">No <span>Q</span>uests, No <span>G</span>ains</span>
        <span class="studio-motto" v-if="$store.state.isPhone">
          No <span>Q</span>uests<br>
          No <span>G</span>ains
        </span>
        <div class="turn-page">
          <img src="../../assets/images/icons/studio_arrow.png" alt="">
          <span>向下滚动查看更多</span>
        </div>
      </div>
    </section>
  </div>
</template>

<script>
import pathUtil from '../../../utils/pathAnimate.js';
export default {
  mounted() {
    this.$store.state.loadedCount++;
  },
  watch: {
    '$store.state.studio': {
      handler(newValue, oldValue) {
        this.pathAnimate(newValue, oldValue);
      },
      deep: true
    },
    '$store.state.pages': (pages) => {
      let pathList = $('#studio-svg path');
      pathUtil.correctStartPath(pathList[7], pathList.slice(8, 14), pages, 0, 0.1);
    }
  },
  methods: {
    pathAnimate(newValue, oldValue) {
        let height = $(window).height();
        let percent = ($(window).scrollTop() % height) / height;   // 计算翻页时候翻过当前页面的百分之几
        let pathList = $('#studio-svg path');
        if (percent <= 0.5) {
          // 这个是执行上半部分的动画效果
          let insidePercent = pathUtil.getStartInsidePer(percent, 0.1);
          if (percent <= 0.1) {
            pathUtil.socketAnimate(pathList.slice(8, 14), insidePercent);
          } else {
            pathUtil.lineAnimate(pathList[7], insidePercent)
          }
        }
    }
  }
}
</script>

<style scoped>
@media only screen and (min-width: 740px) {
  .studio-bulb {
    display: block;
    position: absolute;
    width: 5.5rem;
    height: 5.5rem;
    right: -0.25rem;
    bottom: 2.6rem;
  }
  .container {
    position: relative;
    display: flex;
    justify-content: center;
    background: url(../../assets/images/background/studio_background.png) center center no-repeat;
    background-size: cover;
  }
  .studio-svg {
    position: relative;
    width: 100%;
    height: 100%;
  }
  .section-left {
    position: relative;
    width: 12.54rem;
    height: 100vh;
  }
  .section-right {
    position: relative;
    width: 6.65rem;
    height: 100vh;
  }

  /* section-left容器内部样式 */

  .svg-background {
    position: absolute;
    width: 100%;
    height: 8.26rem;
    right: 0;
    bottom: 0;
    /* background: url(../../assets/images/background/studio_word_bg.png) center center no-repeat; */
    /* background-size: cover; */
  }
  .svg-background>svg {
    position: absolute;
  }

  /* section-left容器内部样式 */

  /* section-right容器内部样式 */
  .rectangle {
    position: absolute;
    width: 4rem;
    height: 2.2rem;
    z-index: 10;
    background-color: rgba(102, 45, 145, .5);
    bottom: 4.9rem;
    left: 0.62rem;
  }
  .words-container {
    position: absolute;
    width: 100%;
    background: transparent;
    z-index: 11;
    bottom: 2rem;
    border-left: 0.09rem solid #AC81CD;
    padding-left: 0.16rem;
  }
  .words-container::after {
    content: "";
    display: block;
    clear: both;
  }
  .words-container>span {
    display: block;
  }
  .studio-name {
    font-size: 0.96rem;
    line-height: 0.96rem;
    color: #f9f2ff;
  }
  .web-type {
    margin-top: 0.16rem;
    line-height: 0.72rem;
    font-size: 0.72rem;
    color: #c8c2cc;
  }
  .studio-motto {
    margin-top: 0.46rem;
    font-size: 0.36rem;
    line-height: 0.36rem;
    color: #969199;
  }
  .studio-motto>span {
    color: #f9f2ff;
  }
  .studio-honor {
    display: block;
    margin-top: 0.7rem;
    font-size: 0.36rem;
    color: #ac81cd;
  }
  /* section-right容器内部样式 */
}
@media only screen and (max-width: 740px) {
  #studio-svg {
    position: absolute;
    bottom: 0;
  }
  .container {
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: url(../../assets/images/background/studio_background.png) center center no-repeat;
    background-size: cover;
  }
  .section-right {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
  }
  .section-left,
  .svg-background {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
  }
  .words-container {
    width: 100%;
    height: 100%;
  }
  .words-container>span {
    position: absolute;
    display: block;
  }
  .studio-name {
    z-index: 2;
    right: 1.55rem;
    bottom: 4.08rem;
    color: #f9f2ff;
    font-size: 1rem;
    line-height: 1.15rem;
  }
  .studio-motto {
    left: 2.6rem;
    bottom: 2.8rem;
    font-size: 0.48rem;
    color: #969199;
  }
  .studio-motto>span {
    color: #f9f2ff;
  }
  .web-type {
    z-index: 1;
    font-size: 0.72rem;
    color: #c8c2cc;
    right: 1.64rem;
    bottom: 2.92rem;
  }
  .studio-bulb {
    position: absolute;
    width: 5.5rem;
    height: 5.5rem;
    left: 50%;
    transform: translateX(-50%);
    bottom: 7.5rem;
  }
  .turn-page {
    position: absolute;
    bottom: 1.33rem;
    left: 1.7rem;
  }
  .rectangle {
    position: absolute;
    width: 2.7rem;
    height: 2.7rem;
    z-index: 1;
    background-color: rgba(102, 45, 145, .5);
    bottom: 3.3rem;
    right: 1.6rem;
  }
  .studio-honor {
    position: absolute;
    color: #ac81cd;
    font-size: 0.48rem;
    left: 2rem;
    bottom: 4.8rem;
    text-align: end;
  }
}
</style>